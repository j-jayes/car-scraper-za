---
title: "scraped-data-processor"
author: "JJayes"
date: "29/04/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(glue)

```

```{r}

df <- read.csv("data/latest/ads_latest.csv")

df <- df %>% 
  as_tibble() %>% 
  janitor::clean_names()

df <- df %>% 
  mutate(make_model = glue("{make} {model}"),
         price = round(price),
         year = round(year)) %>% 
  select(title,
         price,
         make_model,
         province,
         kilometers,
         colour,
         year,
         ad_url,
         text) %>% 
  mutate(province = str_to_title(province))

write_rds(df, "data/latest/ads_latest_clean.rds", compress = "gz")

```

